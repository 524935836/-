<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Document</title>
	</head>
	<body>
		<script type="text/javascript" >

			let data = {
				name:'尚硅谷',
				address:'北京',
			}

			//创建一个监视的实例对象，用于监视data中属性的变化
			// const obs = new Observer(data)		
			// console.log(obs)	

			// //准备一个vm实例对象
			// let vm = {}
			// vm._data = data = obs

			// function Observer(obj){
			// 	//汇总对象中所有的属性形成一个数组
			// 	const keys = Object.keys(obj)
			// 	//遍历
			// 	keys.forEach((k)=>{
			// 		Object.defineProperty(this,k,{
			// 			get(){
			// 				return obj[k]
			// 			},
			// 			set(val){
			// 				console.log(`${k}被改了，我要去解析模板，生成虚拟DOM.....我要开始忙了`)
			// 				obj[k] = val
			// 			}
			// 		})
			// 	})
			// }

      Object.keys(data).forEach(k => {
        observer(data,k,data[k])
        // Object.defineProperty(data,k,{
        //   get(){
        //     return data[k]
        //   },
        //   set(newValue){
        //     console.log('shujubeigai')
        //     data[k] = newValue
        //   }
        // })

      })
			function observer(obj,key,value) {
        Object.defineProperty(obj,key,{
          get(){
            return value //value值通过传参进来已经读好了，不会无限读
          },
          set(newValue){
            console.log('shujubeigai')
            value = newValue
          }
        })
      }		
      console.log(data)


		</script>
	</body>
</html>